// classtweak 0.1.0 - Simple DOM element class manipulator
//
// Copyright (c) 2011 Damon Oehlman (http://www.sidelab.com/)
// Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
/*\
 * classtweak
 [ function ]
 **
 * The `classtweak` function can be used in multiple ways
 **
 > Arguments (option 1)
 **
 - elements (string|array) string that is passed to the Selectors API, or an array of DOM elements to update classes on
 - initAction (string) class modifier string
 - scope (DOMElement) target dom element for querySelector calls (default: document)
 **
 = (function) returns the classtweak function for chaining
 **
 **
 > Usage
 | // add the button class to all anchor tags
 | classtweak('a', '+button');
 > Arguments (option 2)
 **
 - elements (string|array) as per option 1
 **
 = (function) returns the @tweak function to enable class manipulation on the specified elements
\*/function classtweak(a,b,c){function f(b){for(var c=a.length;c--;){var g=a[c],h=g.className?g.className.split(/\s+/).sort():[],i;typeof b=="string"&&(b=b.split(d));for(i=b.length;i--;){var j=b[i],k=j.slice(0,1),l=j.slice(-1),m=j.slice(1),n=e[k],o=k=="."||l==".",p,q=-1;n||(o?(n=e[k=="."&&l=="."?"!":k=="."?"+":"-"],m=j.slice(k=="."?1:0,l=="."?-1:undefined)):(n=e["+"],m=b[i]));for(p=h.length;q<0&&p--;)h[p]===m&&(q=p);n(h,m,q)}g.className=h.join(" ")}return f}if(!a)return undefined;var d=/[\s\,]+/,e={"+":function(a,b,c){c<0&&(a[a.length]=b)},"-":function(a,b,c){c>=0&&a.splice(c,1)},"!":function(a,b,c){e[c<0?"+":"-"](a,b,c)}};return typeof a=="string"||a instanceof String?a=typeof qsa=="function"?qsa(a,c):(c||document).querySelectorAll(a):a.splice||(a=[a]),b&&f(b),b?classtweak:f};